<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Healthcare Operations Dashboard</title>
  <style>
    :root{
      --bg:#071229; --panel:#0f1724; --muted:#9aa9bb; --accent:#16a34a; --danger:#ef4444;
      --glass: rgba(255,255,255,0.03);
      --radius:12px; --gap:16px; --pad:16px; --text:#e6eef8;
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;background:linear-gradient(180deg,#041024 0%, #071229 60%); color:var(--text); padding:20px;
      -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
    }
    .app{
      display:grid; grid-template-columns:260px 1fr; gap:var(--gap); min-height:calc(100vh - 40px);
    }
    header{
      grid-column:1/-1; display:flex; justify-content:space-between; align-items:center; padding:12px 18px; border-radius:12px;
      background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent); box-shadow:0 8px 20px rgba(2,6,23,0.6);
    }
    .brand{display:flex;align-items:center;gap:12px}
    .logo{width:44px;height:44px;border-radius:10px;background:linear-gradient(135deg,var(--accent),#34d399);display:flex;align-items:center;justify-content:center;font-weight:800;color:#022018}
    .title{font-size:1.05rem;font-weight:700}
    .muted{color:var(--muted);font-size:0.9rem}

    /* Sidebar */
    nav.sidebar{background:var(--panel); padding:var(--pad); border-radius:var(--radius); box-shadow:0 8px 20px rgba(2,6,23,0.6); position:sticky; top:20px; height:100%}
    nav h3{margin:8px 0;color:var(--muted);font-size:0.9rem}
    .nav-item{display:flex;align-items:center;gap:10px;padding:10px;border-radius:10px;color:var(--muted);cursor:pointer}
    .nav-item.active{background:rgba(255,255,255,0.03);color:var(--text)}

    /* Main */
    main{display:grid; grid-template-columns: 1fr 360px; gap:var(--gap)}
    section.panel{background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent); padding:var(--pad); border-radius:var(--radius); box-shadow:0 8px 20px rgba(2,6,23,0.6)}
    .kpis{display:flex;gap:12px;margin-bottom:14px}
    .kpi{flex:1;padding:12px;border-radius:10px;background:rgba(255,255,255,0.018)}
    .kpi h4{margin:0;color:var(--muted);font-size:0.85rem}
    .kpi .v{font-size:1.4rem;font-weight:800;margin-top:8px}

    .chart-area{height:300px;display:flex;flex-direction:column;gap:10px}
    .canvas-box{flex:1;border-radius:10px;padding:12px;background:rgba(255,255,255,0.01)}
    .controls{display:flex;gap:8px;align-items:center;justify-content:flex-end}

    .table{width:100%;border-collapse:collapse}
    .table th{text-align:left;color:var(--muted);font-size:0.85rem;padding:8px 6px}
    .table td{padding:10px 6px;border-top:1px solid rgba(255,255,255,0.02)}
    .chip{display:inline-block;padding:6px 10px;border-radius:999px;background:rgba(255,255,255,0.02);font-weight:600}

    .widget{margin-bottom:12px}
    .alert{padding:10px;border-radius:8px;background:rgba(239,68,68,0.12);color:var(--danger);font-weight:700}
    .footer{grid-column:1/-1;margin-top:12px;text-align:center;color:var(--muted);font-size:0.9rem}

    @media (max-width:980px){
      .app{grid-template-columns:1fr}
      main{grid-template-columns:1fr}
      nav.sidebar{position:relative;top:auto}
    }
    /* focus visible */
    :focus{outline:3px solid rgba(96,165,250,0.18);outline-offset:2px}
  </style>
</head>
<body>
  <div class="app" role="application" aria-label="Healthcare operations dashboard">
    <header>
      <div class="brand" aria-hidden="true">
        <div class="logo">HC</div>
        <div>
          <div class="title">Healthcare Ops</div>
          <div class="muted">Patient flow • Capacity • Alerts</div>
        </div>
      </div>

      <div style="display:flex;gap:12px;align-items:center">
        <div class="muted">Facility: <strong style="color:var(--text)">General Hospital</strong></div>
        <button onclick="refreshAll()" style="padding:8px 12px;border-radius:10px;border:none;background:linear-gradient(180deg,var(--accent),#34d399);font-weight:700;cursor:pointer">Refresh</button>
      </div>
    </header>

    <nav class="sidebar" aria-label="Main navigation">
      <h3>Navigation</h3>
      <div class="nav-item active" tabindex="0">Dashboard</div>
      <div class="nav-item" tabindex="0">Patients</div>
      <div class="nav-item" tabindex="0">Admissions</div>
      <div class="nav-item" tabindex="0">Staff</div>

      <h3 style="margin-top:16px">Quick Filters</h3>
      <label class="muted" for="wardSelect">Ward</label>
      <select id="wardSelect" style="width:100%;padding:8px;border-radius:8px;background:transparent;border:1px solid rgba(255,255,255,0.03);color:var(--text)" aria-label="Select ward">
        <option value="all">All Wards</option>
        <option value="er">Emergency</option>
        <option value="icu">ICU</option>
        <option value="wardA">Ward A</option>
      </select>

      <h3 style="margin-top:16px">Critical</h3>
      <div class="alert" role="status" aria-live="polite">2 patients with critical vitals</div>
    </nav>

    <main>
      <section class="panel" aria-labelledby="overview-heading">
        <h2 id="overview-heading" style="margin-top:0">Overview</h2>

        <div class="kpis" role="list" aria-label="KPIs">
          <div class="kpi" role="listitem">
            <h4>Current Patients</h4>
            <div class="v" id="patientsCount">124</div>
            <div class="muted" style="font-size:0.82rem">Occupied beds: <span id="occupied">78%</span></div>
          </div>
          <div class="kpi" role="listitem">
            <h4>Admissions Today</h4>
            <div class="v" id="admissions">26</div>
            <div class="muted" style="font-size:0.82rem">ER admissions: <span id="erAdmissions">9</span></div>
          </div>
          <div class="kpi" role="listitem">
            <h4>Avg. Length of Stay</h4>
            <div class="v" id="los">3.8d</div>
            <div class="muted" style="font-size:0.82rem">Discharges: <span id="discharges">14</span></div>
          </div>
        </div>

        <div style="display:flex;gap:12px;align-items:flex-start;margin-bottom:12px">
          <div style="flex:1">
            <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px">
              <strong>Admissions (last 14 days)</strong>
              <div class="controls">
                <label class="muted" for="range">Days</label>
                <select id="range" aria-label="Chart range" style="margin-left:6px;padding:6px;border-radius:8px;background:transparent;border:1px solid rgba(255,255,255,0.03);color:var(--text)">
                  <option value="7">7</option>
                  <option value="14" selected>14</option>
                  <option value="30">30</option>
                </select>
              </div>
            </div>
            <div class="chart-area">
              <div class="canvas-box" role="img" aria-label="Line chart showing admissions over time">
                <canvas id="admissionsChart" width="800" height="260" style="width:100%;height:260px;"></canvas>
              </div>
              <div style="display:flex;justify-content:space-between;color:var(--muted);font-size:0.9rem">
                <div>Last update: <span id="lastUpdate">Just now</span></div>
                <div id="trendText">Trend: <span class="chip" id="trendChip">+5%</span></div>
              </div>
            </div>
          </div>

          <aside style="width:360px">
            <section class="panel widget" aria-labelledby="patients-heading">
              <h3 id="patients-heading">Top Alerts</h3>
              <table class="table" aria-describedby="alerts-desc">
                <caption id="alerts-desc" style="display:none">List of current critical alerts</caption>
                <thead><tr><th>Patient</th><th>Ward</th><th>Alert</th></tr></thead>
                <tbody id="alertsTable">
                  <!-- populated by JS -->
                </tbody>
              </table>
            </section>

            <section class="panel widget" aria-labelledby="staff-heading" style="margin-top:12px">
              <h3 id="staff-heading">Staff Status</h3>
              <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px">
                <div><div class="muted">Nurses on duty</div><div style="font-weight:800" id="nurses">22</div></div>
                <div><div class="muted">Doctors on duty</div><div style="font-weight:800" id="doctors">9</div></div>
              </div>
              <div class="muted" style="font-size:0.85rem">Staff shortages in ICU and ER — consider redeploying resources.</div>
            </section>
          </aside>
        </div>

        <section class="panel" aria-labelledby="recent-heading" style="margin-top:12px">
          <h3 id="recent-heading">Recent Discharges / Admissions</h3>
          <table class="table" aria-label="Recent activity">
            <thead><tr><th>Time</th><th>Patient</th><th>Action</th><th>Ward</th></tr></thead>
            <tbody id="activityTable"></tbody>
          </table>
        </section>
      </section>

      <aside>
        <section class="panel widget" aria-labelledby="search-heading">
          <h3 id="search-heading">Quick Patient Search</h3>
          <input id="searchInput" placeholder="Search by name or MRN" style="width:100%;padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.03);background:transparent;color:var(--text)" aria-label="Search patient"/>
          <div id="searchResult" style="margin-top:10px;color:var(--muted);font-size:0.9rem">No query yet</div>
        </section>

        <section class="panel widget" aria-labelledby="notes-heading" style="margin-top:12px">
          <h3 id="notes-heading">Clinical Notes (mock)</h3>
          <div class="muted" style="font-size:0.9rem">Recent clinician notes and reminders</div>
          <ul style="margin-top:10px;padding-left:16px">
            <li>Check post-op vitals for patient #482</li>
            <li>COVID screening: 8 pending</li>
            <li>Order lab panel for Ward A</li>
          </ul>
        </section>
      </aside>
    </main>

    <div class="footer">Dashboard prototype — use for demo/testing only. Follow privacy and PHI rules before using real data.</div>
  </div>

  <script>
    // ------------------ Utilities ------------------
    const rand = (min,max)=>Math.floor(Math.random()*(max-min+1))+min;
    const fmtDate = d => d.toLocaleDateString(undefined,{month:'short',day:'numeric'});
    function genSeries(days=14){
      const out=[];
      for(let i=days-1;i>=0;i--){
        const dt=new Date(); dt.setDate(dt.getDate()-i);
        out.push({date:fmtDate(dt), value: rand(5,40)});
      }
      return out;
    }

    // ------------------ Chart (simple line) ------------------
    function drawLine(canvas, data){
      const ctx = canvas.getContext('2d');
      const DPR = window.devicePixelRatio || 1;
      const w = canvas.clientWidth; const h = canvas.clientHeight;
      canvas.width = w*DPR; canvas.height = h*DPR; ctx.scale(DPR,DPR);
      ctx.clearRect(0,0,w,h);

      const pad = 36;
      const chartW = w - pad*2, chartH = h - pad*2;
      const max = Math.max(...data.map(d=>d.value))*1.15;
      // draw grid
      ctx.strokeStyle = 'rgba(255,255,255,0.04)';
      ctx.beginPath();
      for(let i=0;i<=4;i++){
        const y = pad + (i*(chartH/4));
        ctx.moveTo(pad, y); ctx.lineTo(pad+chartW, y);
      }
      ctx.stroke();

      // line
      ctx.beginPath();
      ctx.lineWidth = 2.5;
      ctx.strokeStyle = 'rgba(16,185,129,0.95)';
      data.forEach((pt,i)=>{
        const x = pad + (i*(chartW/(data.length-1)));
        const y = pad + (1 - (pt.value/max))*chartH;
        if(i===0) ctx.moveTo(x,y); else ctx.lineTo(x,y);
      });
      ctx.stroke();

      // area fill
      ctx.lineTo(pad+chartW, pad+chartH); ctx.lineTo(pad, pad+chartH); ctx.closePath();
      const grad = ctx.createLinearGradient(0,pad,0,pad+chartH);
      grad.addColorStop(0,'rgba(16,185,129,0.12)'); grad.addColorStop(1,'rgba(16,185,129,0.02)');
      ctx.fillStyle = grad; ctx.fill();

      // points + labels
      ctx.fillStyle = 'rgba(255,255,255,0.85)'; ctx.font = '12px system-ui, Arial';
      data.forEach((pt,i)=>{
        const x = pad + (i*(chartW/(data.length-1)));
        const y = pad + (1 - (pt.value/max))*chartH;
        ctx.beginPath();
        ctx.arc(x,y,3,0,2*Math.PI); ctx.fill();
        if(i % Math.ceil(data.length/7) === 0){
          ctx.fillStyle = 'rgba(255,255,255,0.55)'; ctx.fillText(pt.date, x-16, pad+chartH+18);
          ctx.fillStyle = 'rgba(255,255,255,0.85)';
        }
      });
    }

    // ------------------ Mock data + DOM refs ------------------
    const admissionsChart = document.getElementById('admissionsChart');
    const rangeSel = document.getElementById('range');
    const lastUpdateEl = document.getElementById('lastUpdate');
    const trendChip = document.getElementById('trendChip');
    const alertsTable = document.getElementById('alertsTable');
    const activityTable = document.getElementById('activityTable');

    let series = genSeries(parseInt(rangeSel.value));
    function refreshKPIs(){
      document.getElementById('patientsCount').textContent = 120 + rand(-10,15);
      document.getElementById('occupied').textContent = (70 + rand(-5,8)) + '%';
      document.getElementById('admissions').textContent = rand(10,40);
      document.getElementById('erAdmissions').textContent = rand(2,12);
      document.getElementById('los').textContent = ( (3 + Math.random()*2).toFixed(1) ) + 'd';
      document.getElementById('discharges').textContent = rand(5,20);
      document.getElementById('nurses').textContent = rand(15,30);
      document.getElementById('doctors').textContent = rand(6,16);
      lastUpdateEl.textContent = new Date().toLocaleTimeString();
      trendChip.textContent = (rand(-6,12) >= 0 ? '+' : '') + rand(-6,12) + '%';
    }

    function renderAlerts(){
      alertsTable.innerHTML = '';
      const sample = [
        {name:'Patricia M.', ward:'ICU', alert:'BP low'},
        {name:'John S.', ward:'ER', alert:'Unstable vitals'},
      ];
      sample.forEach(r=>{
        const tr = document.createElement('tr');
        tr.innerHTML = `<td style="font-weight:700">${r.name}</td><td class="muted">${r.ward}</td><td style="color:var(--danger);font-weight:800">${r.alert}</td>`;
        alertsTable.appendChild(tr);
      });
    }

    function renderActivity(){
      activityTable.innerHTML = '';
      const acts = [
        {t:'08:12', p:'#482 - A. Kumar', a:'Admitted', w:'ER'},
        {t:'07:55', p:'#399 - L. Rao', a:'Discharged', w:'Ward B'},
        {t:'06:30', p:'#521 - R. Chen', a:'Transferred to ICU', w:'ICU'},
      ];
      acts.forEach(x=>{
        const tr = document.createElement('tr');
        tr.innerHTML = `<td class="muted">${x.t}</td><td style="font-weight:700">${x.p}</td><td>${x.a}</td><td class="muted">${x.w}</td>`;
        activityTable.appendChild(tr);
      });
    }

    // initial draw
    function updateChart(){
      drawLine(admissionsChart, series);
      refreshKPIs();
      renderAlerts();
      renderActivity();
    }
    updateChart();

    // interactions
    rangeSel.addEventListener('change', ()=>{
      series = genSeries(parseInt(rangeSel.value));
      updateChart();
    });

    function refreshAll(){
      series = genSeries(parseInt(rangeSel.value));
      updateChart();
    }

    // search (mock)
    const searchInput = document.getElementById('searchInput');
    const searchResult = document.getElementById('searchResult');
    searchInput.addEventListener('input', ()=>{
      const q = searchInput.value.trim();
      if(!q) return searchResult.textContent = 'No query yet';
      // demo-only: fake result
      searchResult.innerHTML = `<div style="font-weight:800">Found: ${q} (MRN: ${1000+rand(1,900)})</div><div class="muted">Click patient for details (demo)</div>`;
    });

    // responsive redraw
    let to; window.addEventListener('resize', ()=>{ clearTimeout(to); to=setTimeout(()=>updateChart(),150) });

    // Accessibility hint: keyboard nav for nav items
    document.querySelectorAll('.nav-item').forEach((el)=> el.addEventListener('keydown', (e)=> { if(e.key==='Enter') el.click(); }));

    // Note: this is a client-side prototype using mock data only. Do NOT use with PHI without appropriate safeguards.
  </script>
</body>
</html>
